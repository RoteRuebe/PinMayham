## Data production
import arena_3 as arena
import waehlerstromrechner_2 as waehlerstromrechner

## Data input
import dill, pickle
import os.path

## Data visualization
from prettytable import PrettyTable
from collections import OrderedDict

## Data reproduction
import numpy

class sim_election ( arena.election ):
    """The class which organizes and manages the values of one election and the projected voters transition by the algorithm."""
    def __init__ ( self, unit_num, voters, parties_1, parties_2, transition, voters_transition ):
        arena.election.__init__(self, unit_num, voters, parties_1, parties_2, transition)
        self.voters_transition = voters_transition

class simulation:
    """The class which organizes and manages the simulation."""
    def __init__ ( self, num_elections, county_num, voters, parties_1, parties_2, transition, file ):
        
        ## (1) Creating data
        
        self.elections = self.create_elections( num_elections, county_num, voters, parties_1, parties_2, transition )
    
        ## (2) Creating a voters transition
        
        for I in self.elections:
            I.voters_transition = waehlerstromrechner.calculator( parties_1, parties_2, I )
        
        ## (3) Saving the results
        
        f = open(file,"w")
        pickle.dump(self.elections, f)
        f.close()
    
    def create_elections ( self, num_elections, county_num, voters, parties_1, parties_2, transition ):
        """The function that creates an arena-election event."""
        list = []
        for I in range(num_elections):
            list.append( sim_election(county_num, voters, parties_1, parties_2, transition, None) )
        return list
                
if __name__ == "__main__":
    sim = simulation( 100, 1000, 1000, OrderedDict([("A",0.50),("B",0.30),("C",0.15),("D",0.05)]), ["A","B"], [ [0.5,0.5], [0,1], [0.25,0.75], [0.9,0.1] ],"file.txt")