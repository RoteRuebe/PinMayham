import csv, numpy
import waehlerstromrechner_2 as waehlerstromrechner
from collections import OrderedDict
            
class reader:
    def __init__ ( self, parties1, parties2, file ):
        self.parties1 = parties1
        self.parties2 = parties2
        self.data = self.get_data(file)
        print self.data
        print waehlerstromrechner.calculator( parties1, parties2, self.data ).data_output
        
    def get_data ( self, file ):
        """The function which gathers the electoral results out of a csv file"""
        data = []
        with open(file) as csvfile:
            reader = csv.DictReader(csvfile)
            for row in reader:
                Esecndlist = []
                Eprimelist = []
                for I in self.parties1:
                    Esecndlist.append( (I, int(row[I])) )
                for I in self.parties2:
                    Eprimelist.append ( (I, int(row[I])) )
                    
                Eprime = OrderedDict( Eprimelist )
                Esecnd = OrderedDict( Esecndlist )
                 
                data.append( [ Eprime, Esecnd ] )
        return data
    
r = reader( ["SPO_13","OVP_13","FPO_13","BZO_13","GRUNE_13","FRANK_13","NEOS_13","SONST_13","NW_13"], ["SPO_17","OVP_17","FPO_17","GRUNE_17","NEOS_17","PILZ_17","SONST_17","NW_17"], "Daten.csv")